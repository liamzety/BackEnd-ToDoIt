{"version":3,"sources":["assets/img/loader.gif","services/httpService.js","services/userService.js","store/actions/userActions.js","cmps/UserLog.jsx","services/noteService.js","cmps/Loader.jsx","cmps/NotesList.jsx","cmps/SideBar.jsx","cmps/TopBar.jsx","routes.js","views/Home.jsx","views/UserSign.jsx","views/NoteApp.jsx","store/actions/noteActions.js","App.jsx","store/reducers/userReducer.js","store/store.js","index.js"],"names":["module","exports","axios","Axios","create","withCredentials","endpoint","data","ajax","a","method","url","res","console","log","dir","response","status","userService","loadUsers","login","signup","query","logout","userId","httpService","users","userCred","user","_handleLogin","notes","newUser","Promise","reject","sessionStorage","clear","setItem","JSON","stringify","dispatch","then","signedUser","type","catch","err","UserLog","onLogin","useState","userDetails","setUserDetails","onLogUserInp","ev","target","name","value","className","onSubmit","preventDefault","onChange","placeholder","to","noteService","update","remove","add","note","title","body","noteId","updatedUser","_id","Loader","src","loader","alt","NotesList","onNoteSelect","map","key","onClick","SideBar","onRemoveNote","onAddNote","TopBar","onLogOut","currNote","onUpdateNote","isUnsaved","style","opacity","path","component","history","useDispatch","userToLog","push","useEffect","userToAdd","setUserToAdd","onAddTempInp","onSignup","loggedUser","useSelector","state","userReducer","defaultNote","setDefaultNote","setCurrNote","setisUnsaved","onWindowKey","ctrlKey","_setNotes","length","window","addEventListener","removeEventListener","prevState","App","routes","route","exact","localLoggedinUser","parse","initialState","rootReducer","combineReducers","action","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8EAAAA,EAAOC,QAAU,IAA0B,oC,kNCKvCC,E,OAAQC,EAAMC,OAAO,CACrBC,iBAAiB,IAEN,WACPC,EAAUC,GACV,OAAOC,EAAKF,EAAU,MAAOC,IAFtB,WAIND,EAAUC,GACX,OAAOC,EAAKF,EAAU,OAAQC,IALvB,WAOPD,EAAUC,GACV,OAAOC,EAAKF,EAAU,MAAOC,IARtB,WAUJD,EAAUC,GACb,OAAOC,EAAKF,EAAU,SAAUC,I,SAGzBC,E,8EAAf,WAAoBF,GAApB,+BAAAG,EAAA,6DAA8BC,EAA9B,+BAAuC,MAAOH,EAA9C,+BAAqD,KAArD,kBAE0BL,EAAM,CACpBS,IAAI,GAAD,OAtBT,SAsBS,OAAgBL,GACnBI,SACAH,SALZ,cAEcK,EAFd,yBAOeA,EAAIL,MAPnB,sCASQM,QAAQC,IAAR,qBAA0BJ,EAA1B,yCAAiEJ,EAAjE,wBAAyFC,IACzFM,QAAQE,IAAR,MACI,KAAIC,UAAY,KAAIA,SAASC,OAXzC,+D,sBCpBO,IAAMC,EAAc,CACvBC,U,2CACAC,M,4CACAC,O,4CACAC,M,4CACAC,O,wFAEJ,WAAqBC,GAArB,SAAAf,EAAA,sEACiBgB,EAAA,eAAwBD,IADzC,oF,kEAGA,4BAAAf,EAAA,+EAG4BgB,EAAgB,QAH5C,cAGcC,EAHd,OAIQb,QAAQC,IAAI,sBAAuBY,GAJ3C,kBAKeA,GALf,sCAOQb,QAAQC,IAAI,mCAPpB,+D,kEAYA,WAAqBa,GAArB,eAAAlB,EAAA,+EAE2BgB,EAAiB,aAAcE,GAF1D,cAEcC,EAFd,yBAGeC,EAAaD,IAH5B,sCAKQf,QAAQC,IAAI,2CALpB,+D,kEASA,WAAsBa,GAAtB,iBAAAlB,EAAA,6DACII,QAAQC,IAAI,UAAWa,GACjBC,EAFV,aAGQE,MAAO,IACJH,GAJX,kBAO8BF,EAAiB,cAAeG,GAP9D,cAOcG,EAPd,yBAQeF,EAAaE,IAR5B,uCAUQlB,QAAQC,IAAI,gCAAZ,MAVR,kBAWekB,QAAQC,OAAO,KAAIjB,SAAST,OAX3C,0D,kEAeA,sBAAAE,EAAA,sEACUgB,EAAiB,eAD3B,OAEIS,eAAeC,QAFnB,4C,sBAKA,SAASN,EAAaD,GAElB,OADAM,eAAeE,QAAQ,OAAQC,KAAKC,UAAUV,IACvCA,EC7CJ,SAASR,EAAMQ,GAClB,OAAO,SAAAW,GACH,OAAOrB,EAAYE,MAAMQ,GACpBY,MAAK,SAAAC,GAEF,OADAF,EAAS,CAAEG,KAAM,WAAYd,KAAMa,IAC5Bb,KAEVe,OAAM,SAAAC,GAAS,MAAMA,MAI3B,SAASvB,EAAOO,GAEnB,OADAf,QAAQC,IAAI,cAAec,GACpB,SAAAW,GACH,OAAOrB,EAAYG,OAAOO,GACrBY,MAAK,SAAAC,GAEF,OADAF,EAAS,CAAEG,KAAM,WAAYd,KAAMa,IAC5Bb,MAKhB,SAASL,IACZ,OAAO,SAAAgB,GACH,OAAOrB,EAAYK,SACdiB,MAAK,WACFD,EAAS,CAAEG,KAAM,eChC1B,SAASG,EAAT,GAA+B,IAAZC,EAAW,EAAXA,QAAW,EACKC,mBAAS,MADd,mBAC1BC,EAD0B,KACbC,EADa,KAGjC,SAASC,EAAaC,GAClBF,EAAe,2BACRD,GADO,kBAETG,EAAGC,OAAOC,KAAOF,EAAGC,OAAOE,SAGpC,OACI,0BAAMC,UAAU,aACZC,SAAU,SAAAL,GACNA,EAAGM,iBACHX,EAAQE,KAGZ,2BAAOU,SAAUR,EAAcG,KAAK,WAAWX,KAAK,OAAOiB,YAAY,aACvE,2BAAOD,SAAUR,EAAcG,KAAK,WAAWX,KAAK,OAAOiB,YAAY,aACvE,yCACA,oDAAyB,kBAAC,IAAD,CAASC,GAAG,SAAZ,mBCrB9B,IAAMC,EAAc,CACvBC,O,8CACAC,O,8CACAC,I,yFAGJ,WAAmBpC,GAAnB,eAAAnB,EAAA,6DACUwD,EAAO,CACTC,MAAO,WACPC,KAAM,0BAHd,SAKiB1C,EAAiB,OAAQ,CAAEwC,OAAMrC,SALlD,oF,kEAOA,WAAsBwC,EAAQxC,GAA9B,eAAAnB,EAAA,sEAC8BgB,EAAA,eAA2B2C,GAAU,CAAExC,SADrE,cACUyC,EADV,yBAEWA,GAFX,4C,kEAIA,WAAsBJ,EAAMrC,GAA5B,SAAAnB,EAAA,sEACiBgB,EAAA,eAAwBwC,EAAKK,KAAO,CAAEL,OAAMrC,SAD7D,oF,2CCjBO,SAAS2C,IACZ,OACI,yBAAKhB,UAAU,UACX,yBAAKiB,IAAKC,IAAQC,IAAI,MCH3B,SAASC,EAAT,GAA6C,IAAxB7C,EAAuB,EAAvBA,MAAO8C,EAAgB,EAAhBA,aAC/B,OAAK9C,EAED,wBAAIyB,UAAU,cACTzB,EAAM+C,KAAI,SAAAZ,GACP,OACI,wBAAIa,IAAKb,EAAKK,IACVS,QAAS,WAAQH,EAAaX,KAC7BA,EAAKC,WAPP,kBAACK,EAAD,MCAhB,SAASS,EAAT,GAAoE,IAAjDC,EAAgD,EAAhDA,aAAcnD,EAAkC,EAAlCA,MAAO8C,EAA2B,EAA3BA,aAAcM,EAAa,EAAbA,UACzD,OACI,yBAAK3B,UAAU,gBACX,4BAAQwB,QAASG,GAAjB,OACA,kBAACP,EAAD,CACI7C,MAAOA,EACP8C,aAAcA,EACdK,aAAcA,KCRvB,SAASE,EAAT,GAAqF,EAAnEvD,KAAoE,IAA9DwD,EAA6D,EAA7DA,SAAUC,EAAmD,EAAnDA,SAAUC,EAAyC,EAAzCA,aAAcC,EAA2B,EAA3BA,UAAWN,EAAgB,EAAhBA,aAExE,OACI,yBAAK1B,UAAU,0CAEX,uBAAGiC,MAAO,CAAEC,QAASF,EAAY,IAAM,MAAvC,QAEIF,GACA,oCACI,gCAAMA,EAASnB,OACf,yBAAKX,UAAU,WACX,4BAAQwB,QAASO,GAAjB,QACA,4BAAQP,QAASE,GAAjB,UACA,4BAAQF,QAASK,GAAjB,aCXT,OACX,CACIM,KAAM,IACNC,UCDD,YAA4B,IAAZC,EAAW,EAAXA,QACfrD,EAAWsD,cADe,4CAQhC,WAAuBC,GAAvB,SAAArF,EAAA,yDACOqF,EADP,0EAGUvD,EAASnB,EAAM0E,IAHzB,OAIIF,EAAQG,KAAK,UAJjB,gDAMIlF,QAAQC,IAAI,OAAZ,MANJ,0DARgC,sBAkBhC,OAhBAkF,qBAAU,WACJ9D,eAAeN,MAAMgE,EAAQG,KAAK,YACrC,IAeD,6BAASxC,UAAU,QACjB,kBAACV,EAAD,CAASC,QApBmB,iDDG9B,CACI4C,KAAM,QACNC,UEPD,YAAgC,IAAZC,EAAW,EAAXA,QACjBrD,EAAWsD,cADiB,EAEA9C,mBAAS,MAFT,mBAE3BkD,EAF2B,KAEhBC,EAFgB,KAIlC,SAASC,EAAahD,GAClB+C,EAAa,2BACND,GADK,kBAEP9C,EAAGC,OAAOC,KAAOF,EAAGC,OAAOE,SAPF,4CAUlC,WAAwB2C,GAAxB,SAAAxF,EAAA,yDACSwF,EADT,0EAGc1D,EAASlB,EAAO4E,IAH9B,OAIQL,EAAQG,KAAK,UAJrB,gDAMQlF,QAAQC,IAAI,OAAZ,MANR,0DAVkC,sBAmBlC,OACI,0BAAMyC,UAAU,WACZC,SAAU,SAAAL,GACNA,EAAGM,iBAtBmB,oCAuBtB2C,CAASH,KAGb,2BAAOvC,SAAUyC,EAAc9C,KAAK,WAAWX,KAAK,OAAOiB,YAAY,aACvE,2BAAOD,SAAUyC,EAAc9C,KAAK,WAAWX,KAAK,OAAOiB,YAAY,aACvE,8CFnBR,CACI+B,KAAM,SACNC,UGPD,YAA+B,IAAZC,EAAW,EAAXA,QAClBrD,EAAWsD,cACTQ,EAAeC,aAAY,SAACC,GAAD,OAAWA,EAAMC,eAA5CH,WAF2B,EAGGtD,mBAAS,MAHZ,mBAG5B0D,EAH4B,KAGfC,EAHe,OAIH3D,mBAAS,MAJN,mBAI5BsC,EAJ4B,KAIlBsB,EAJkB,OAKD5D,oBAAS,GALR,mBAK5BwC,EAL4B,KAKjBqB,EALiB,KAoCnC,SAASC,EAAY1D,GACfA,EAAG2D,SAAsB,MAAX3D,EAAG2B,MACnB3B,EAAGM,iBACH6B,KAWJ,SAASA,IC/CJ,IAAoBrB,EAAMrC,EDgD7BW,GChDuB0B,EDgDHoB,EChDSzD,EDgDCyE,EC/C9B,uCAAO,WAAM9D,GAAN,eAAA9B,EAAA,sEACuBoD,EAAYC,OAAOG,EAAMrC,GADhD,OACGyC,EADH,OAEH9B,EAAS,CAAEG,KAAM,YAAa2B,gBAF3B,2CAAP,wDDgDAqC,EAAerB,GApDkB,4CAwDnC,sBAAA5E,EAAA,sEACQ8B,EAAShB,KADjB,OAEEqE,EAAQG,KAAK,KAFf,4CAxDmC,sBAyEnC,SAASgB,EAAU9C,GACjByC,EAAezC,GACf0C,EAAY1C,GAEd,OArEA+B,qBAAU,WVdL,IAAkBxE,EUehB6E,GAEH9D,GVjBmBf,EUiBD6E,EAAW/B,IVf/B,uCAAO,WAAM/B,GAAN,eAAA9B,EAAA,sEACgBS,EAAYI,MAAME,GADlC,OACGI,EADH,OAEHW,EAAS,CAAEG,KAAM,WAAYd,SAF1B,2CAAP,wDUgBEmF,EAAUV,EAAWvE,MAAMuE,EAAWvE,MAAMkF,OAAS,KAHtCpB,EAAQG,KAAK,OAK7B,IAGHC,qBAAU,YACJS,GAAgBA,EAAYtC,OAASkB,EAASlB,MAAQsC,EAAYvC,QAAUmB,EAASnB,MAElF0C,GAAa,GADlBA,GAAa,KAEd,CAACvB,EAAUoB,IAGdT,qBAAU,WAER,OADAiB,OAAOC,iBAAiB,UAAWL,GAC5B,kBAAMI,OAAOE,oBAAoB,UAAWN,OAIrDb,qBAAU,WACRnF,QAAQC,IAAI,qBAAsBuF,EAAWvE,OAC7CiF,EAAUV,EAAWvE,MAAMuE,EAAWvE,MAAMkF,OAAS,IAAM,QAC1D,CAACX,EAAWvE,MAAMkF,SA4ChBX,EAIH,6BAAS9C,UAAU,iBACjB,yBAAKA,UAAU,iBACb,kBAACyB,EAAD,CACElD,MAAOuE,EAAWvE,MAClB8C,aAzBR,SAAsBX,GACpB8C,EAAU9C,IAyBJiB,UA1CR,WChDK,IAAiBtD,EDiDpBW,GCjDoBX,EDiDHyE,EChDjB,uCAAO,WAAM9D,GAAN,eAAA9B,EAAA,sEACuBoD,EAAYG,IAAIpC,GADvC,OACGyC,EADH,OAEH9B,EAAS,CAAEG,KAAM,YAAa2B,gBAF3B,2CAAP,4DD8FE,yBAAKd,UAAU,uBACb,kBAAC4B,EAAD,CACEI,UAAWA,EACXF,SAAUA,EACVzD,KAAMyE,EACNf,aAAcA,EACdL,aAlDR,WCrCK,IAAoBb,EAAQxC,EDsC/BW,GCtCuB6B,EDsCHiB,EAASf,ICtCE1C,EDsCGyE,ECrClC,uCAAO,WAAM9D,GAAN,eAAA9B,EAAA,sEACuBoD,EAAYE,OAAOK,EAAQxC,GADlD,OACGyC,EADH,OAEH9B,EAAS,CAAEG,KAAM,cAAe2B,gBAF7B,2CAAP,yDDuFMe,SAlG2B,6CAmG5BC,GAAwC,IAA5BgB,EAAWvE,MAAMkF,OAC5B,8BACE3D,KAAK,OACLC,MAAO+B,EAASlB,KAChBT,SAxCV,SAAsBP,GACpB,IAAMC,EAASD,EAAGC,OAClBuD,GAAY,SAAAS,GACV,OAAO,2BACFA,GADL,kBAEGhE,EAAOC,KAAOD,EAAOE,YAoClBC,UAAU,gBAIZ,gDA9BC,6CEtEI8D,MAZf,WACE,OACE,0BAAM9D,UAAU,OACd,kBAAC,IAAD,KACE,kBAAC,IAAD,KACG+D,EAAOzC,KAAI,SAAA0C,GAAK,OAAI,kBAAC,IAAD,CAAOzC,IAAKyC,EAAM7B,KAAM8B,OAAK,EAAC7B,UAAW4B,EAAM5B,UAAWD,KAAM6B,EAAM7B,c,gBCTjG+B,EAAoB,KACpBvF,eAAeN,OAAM6F,EAAoBpF,KAAKqF,MAAMxF,eAAeN,OAEvE,IAAM+F,EAAe,CACjBtB,WAAYoB,GCAhB,IAAMG,EAAcC,YAAgB,CAChCrB,YDEG,WAAoD,IAA/BD,EAA8B,uDAAtBoB,EAAcG,EAAQ,uCACtD,OAAQA,EAAOpF,MAEX,IAAK,WAED,OADAR,eAAeE,QAAQ,OAAQC,KAAKC,UAAUwF,EAAOlG,OAC9C,2BACA2E,GADP,IAEIF,WAAYyB,EAAOlG,OAE3B,IAAK,SACD,OAAO,2BACA2E,GADP,IAEIF,WAAY,OAGpB,IAAK,YAOL,IAAK,cAED,OADAnE,eAAeE,QAAQ,OAAQC,KAAKC,UAAUwF,EAAOzD,cAC9C,YAAC,eACDkC,GADP,IAEIF,WAAYyB,EAAOzD,cAG3B,QACI,OAAOkC,MC9BbwB,EAAmBd,OAAOe,sCAAwCC,IAE3DC,EAAQC,YAAYP,EAAaG,EAAiBK,YAAgBC,O,MCF/EC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,IAAD,CAAUN,MAAOA,GACf,kBAAC,EAAD,QAGJO,SAASC,eAAe,W","file":"static/js/main.b747b9a3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loader.e30f1374.gif\";","import Axios from 'axios';\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\nexport default {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        if (err.response && err.response.status === 401) {\r\n            // window.location.assign('/#/login');\r\n        }\r\n        throw err;\r\n    }\r\n}","import httpService from './httpService';\r\n\r\nexport const userService = {\r\n    loadUsers,\r\n    login,\r\n    signup,\r\n    query,\r\n    logout\r\n}\r\nasync function query(userId) {\r\n    return await httpService.get(`user/${userId}`)\r\n}\r\nasync function loadUsers() {\r\n    //DONE\r\n    try {\r\n        const users = await httpService.get('user')\r\n        console.log('users from service:', users)\r\n        return users;\r\n    } catch (err) {\r\n        console.log('userService: Coulnd\\'t get users');\r\n        throw err;\r\n    }\r\n}\r\n\r\nasync function login(userCred) {\r\n    try {\r\n        const user = await httpService.post('auth/login', userCred);\r\n        return _handleLogin(user)\r\n    } catch (err) {\r\n        console.log('userService: Wrong username or password');\r\n        throw err;\r\n    }\r\n}\r\nasync function signup(userCred) {\r\n    console.log('signup:', userCred)\r\n    const user = {\r\n        notes: [],\r\n        ...userCred\r\n    }\r\n    try {\r\n        const newUser = await httpService.post('auth/signup', user)\r\n        return _handleLogin(newUser)\r\n    } catch (err) {\r\n        console.log('userService: Couldn\\'t sign up', err);\r\n        return Promise.reject(err.response.data);\r\n    }\r\n}\r\n\r\nasync function logout() {\r\n    await httpService.post('auth/logout');\r\n    sessionStorage.clear();\r\n}\r\n\r\nfunction _handleLogin(user) {\r\n    sessionStorage.setItem('user', JSON.stringify(user))\r\n    return user;\r\n}\r\n","import { userService } from '../../services/userService'\r\n\r\nexport function loadUser(userId) {\r\n\r\n    return async dispatch => {\r\n        const user = await userService.query(userId)\r\n        dispatch({ type: 'LOG_USER', user })\r\n    }\r\n}\r\n\r\nexport function login(user) {\r\n    return dispatch => {\r\n        return userService.login(user)\r\n            .then(signedUser => {\r\n                dispatch({ type: 'LOG_USER', user: signedUser })\r\n                return user\r\n            })\r\n            .catch(err => { throw err })\r\n\r\n    }\r\n}\r\nexport function signup(user) {\r\n    console.log('signing up:', user)\r\n    return dispatch => {\r\n        return userService.signup(user)\r\n            .then(signedUser => {\r\n                dispatch({ type: 'LOG_USER', user: signedUser })\r\n                return user\r\n            })\r\n    }\r\n}\r\n\r\nexport function logout() {\r\n    return dispatch => {\r\n        return userService.logout()\r\n            .then(() => {\r\n                dispatch({ type: 'LOGOUT' })\r\n            })\r\n    }\r\n}\r\n\r\n","import React, { useState } from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { UserSign } from '../views/UserSign'\r\n\r\nexport function UserLog({ onLogin }) {\r\n    const [userDetails, setUserDetails] = useState(null)\r\n\r\n    function onLogUserInp(ev) {\r\n        setUserDetails({\r\n            ...userDetails,\r\n            [ev.target.name]: ev.target.value\r\n        })\r\n    }\r\n    return (\r\n        <form className=\"user-login\"\r\n            onSubmit={ev => {\r\n                ev.preventDefault()\r\n                onLogin(userDetails)\r\n\r\n            }}>\r\n            <input onChange={onLogUserInp} name=\"username\" type=\"text\" placeholder=\"username\" />\r\n            <input onChange={onLogUserInp} name=\"password\" type=\"text\" placeholder=\"password\" />\r\n            <button>Login</button>\r\n            <p>Dont have an account? <NavLink to='/sign'>Sign in here </NavLink></p>\r\n        </form>\r\n    )\r\n}\r\n","import httpService from \"./httpService\"\r\n\r\nexport const noteService = {\r\n    update,\r\n    remove,\r\n    add\r\n}\r\n\r\nasync function add(user) {\r\n    const note = {\r\n        title: \"Untitled\",\r\n        body: \"Write your ideas here!\"\r\n    }\r\n    return await httpService.post('note', { note, user });\r\n}\r\nasync function remove(noteId, user) {\r\n    const updatedUser = await httpService.delete(`note/${noteId}`, { user })\r\n    return updatedUser\r\n}\r\nasync function update(note, user) {\r\n    return await httpService.put(`note/${note._id}`, { note, user })\r\n}\r\n\r\n","import React from 'react'\r\nimport loader from \"../assets/img/loader.gif\";\r\nexport function Loader() {\r\n    return (\r\n        <div className=\"loader\">\r\n            <img src={loader} alt=\"\" />\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Loader } from './Loader'\r\nexport function NotesList({ notes, onNoteSelect }) {\r\n    if (!notes) return <Loader />\r\n    return (\r\n        <ul className=\"notes-list\">\r\n            {notes.map(note => {\r\n                return (\r\n                    <li key={note._id}\r\n                        onClick={() => { onNoteSelect(note) }}>\r\n                        {note.title}\r\n                    </li>\r\n                )\r\n            })}\r\n        </ul>\r\n    )\r\n\r\n}\r\n","import React from 'react'\r\nimport { NotesList } from './NotesList'\r\n\r\nexport function SideBar({ onRemoveNote, notes, onNoteSelect, onAddNote }) {\r\n    return (\r\n        <div className=\"sidebar w100\">\r\n            <button onClick={onAddNote}>add</button>\r\n            <NotesList\r\n                notes={notes}\r\n                onNoteSelect={onNoteSelect}\r\n                onRemoveNote={onRemoveNote} />\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect } from 'react'\r\n\r\nexport function TopBar({ user, onLogOut, currNote, onUpdateNote, isUnsaved, onRemoveNote }) {\r\n\r\n    return (\r\n        <div className=\"topbar flex align-center space-between\">\r\n\r\n            <p style={{ opacity: isUnsaved ? '1' : '0' }}>save</p>\r\n            {\r\n                currNote &&\r\n                <>\r\n                    <h1> {currNote.title}</h1>\r\n                    <div className=\"actions\">\r\n                        <button onClick={onUpdateNote}>save</button>\r\n                        <button onClick={onRemoveNote}>remove</button>\r\n                        <button onClick={onLogOut}>LOGOUT</button>\r\n                    </div>\r\n                </>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import { Home } from './views/Home'\r\nimport { NoteApp } from './views/NoteApp'\r\nimport { UserSign } from './views/UserSign'\r\n\r\nexport default [\r\n    {\r\n        path: '/',\r\n        component: Home\r\n    },\r\n    {\r\n        path: '/sign',\r\n        component: UserSign\r\n    },\r\n    {\r\n        path: '/notes',\r\n        component: NoteApp\r\n    }\r\n]","import React from 'react'\r\nimport { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { UserLog } from '../cmps/UserLog'\r\nimport { login } from '../store/actions/userActions';\r\n\r\nexport function Home({ history }) {\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    if (sessionStorage.user) history.push(\"/notes\")\r\n  }, [])\r\n\r\n  //User\r\n\r\n  async function onLogin(userToLog) {\r\n    if (!userToLog) return\r\n    try {\r\n      await dispatch(login(userToLog))\r\n      history.push(\"/notes\")\r\n    } catch (error) {\r\n      console.log('Err:', error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section className=\"home\">\r\n      <UserLog onLogin={onLogin} />\r\n    </section>\r\n  )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useDispatch } from 'react-redux';\r\nimport { signup } from '../store/actions/userActions';\r\n\r\nexport function UserSign({ history }) {\r\n    const dispatch = useDispatch();\r\n    const [userToAdd, setUserToAdd] = useState(null)\r\n\r\n    function onAddTempInp(ev) {\r\n        setUserToAdd({\r\n            ...userToAdd,\r\n            [ev.target.name]: ev.target.value\r\n        })\r\n    }\r\n    async function onSignup(userToAdd) {\r\n        if (!userToAdd) return\r\n        try {\r\n            await dispatch(signup(userToAdd))\r\n            history.push(\"/notes\")\r\n        } catch (error) {\r\n            console.log('Err:', error)\r\n        }\r\n    }\r\n    return (\r\n        <form className=\"user-add\"\r\n            onSubmit={ev => {\r\n                ev.preventDefault()\r\n                onSignup(userToAdd)\r\n\r\n            }}>\r\n            <input onChange={onAddTempInp} name=\"username\" type=\"text\" placeholder=\"username\" />\r\n            <input onChange={onAddTempInp} name=\"password\" type=\"text\" placeholder=\"password\" />\r\n            <button>Sign up</button>\r\n        </form>\r\n    )\r\n}\r\n","import React, { useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { addNote, updateNote, removeNote } from \"../store/actions/noteActions\";\r\nimport { loadUser, logout } from '../store/actions/userActions';\r\nimport { SideBar } from '../cmps/SideBar';\r\nimport { TopBar } from '../cmps/TopBar';\r\nimport { useState } from 'react';\r\n\r\nexport function NoteApp({ history }) {\r\n  const dispatch = useDispatch();\r\n  const { loggedUser } = useSelector((state) => state.userReducer);\r\n  const [defaultNote, setDefaultNote] = useState(null)\r\n  const [currNote, setCurrNote] = useState(null)\r\n  const [isUnsaved, setisUnsaved] = useState(false)\r\n\r\n  //If user is not logged then move to home\r\n  useEffect(() => {\r\n    if (!loggedUser) history.push(\"/\")\r\n    else {\r\n      dispatch(loadUser(loggedUser._id))\r\n      _setNotes(loggedUser.notes[loggedUser.notes.length - 1])\r\n    }\r\n  }, [])\r\n\r\n  //Detect changes, if changes were made show unsaved icon\r\n  useEffect(() => {\r\n    if (defaultNote && (defaultNote.body !== currNote.body || defaultNote.title !== currNote.title)) {\r\n      setisUnsaved(true)\r\n    } else setisUnsaved(false)\r\n  }, [currNote, defaultNote])\r\n\r\n  //Listen to window key presses\r\n  useEffect(() => {\r\n    window.addEventListener(\"keydown\", onWindowKey);\r\n    return () => window.removeEventListener(\"keydown\", onWindowKey);\r\n  });\r\n\r\n  //On logged user note length change AKA remove,add - reload and set notes.\r\n  useEffect(() => {\r\n    console.log('updated loggeduser', loggedUser.notes)\r\n    _setNotes(loggedUser.notes[loggedUser.notes.length - 1] || null)\r\n  }, [loggedUser.notes.length])\r\n\r\n  //if window key Ctrl+S then save curr note\r\n  function onWindowKey(ev) {\r\n    if (ev.ctrlKey && ev.key === 's') {\r\n      ev.preventDefault()\r\n      onUpdateNote(currNote)\r\n    }\r\n  }\r\n\r\n  //---------------CRUD-----------------\r\n  function onAddNote() {\r\n    dispatch(addNote(loggedUser))\r\n  }\r\n  function onRemoveNote() {\r\n    dispatch(removeNote(currNote._id, loggedUser))\r\n  }\r\n  function onUpdateNote() {\r\n    dispatch(updateNote(currNote, loggedUser))\r\n    setDefaultNote(currNote)\r\n  }\r\n\r\n  //--------------------------------\r\n  async function onLogOut() {\r\n    await dispatch(logout())\r\n    history.push(\"/\")\r\n  }\r\n  function onNoteSelect(note) {\r\n    _setNotes(note)\r\n  }\r\n  function onNoteChange(ev) {\r\n    const target = ev.target\r\n    setCurrNote(prevState => {\r\n      return {\r\n        ...prevState,\r\n        [target.name]: target.value\r\n\r\n      }\r\n    })\r\n  }\r\n  function _setNotes(note) {\r\n    setDefaultNote(note)\r\n    setCurrNote(note)\r\n  }\r\n  if (!loggedUser) {\r\n    return <h1>Loading...</h1>\r\n  }\r\n  return (\r\n    <section className=\"note-app flex\">\r\n      <div className=\"col-left flex\">\r\n        <SideBar\r\n          notes={loggedUser.notes}\r\n          onNoteSelect={onNoteSelect}\r\n          onAddNote={onAddNote}\r\n\r\n        />\r\n      </div>\r\n\r\n      <div className=\"col-right col flex \">\r\n        <TopBar\r\n          isUnsaved={isUnsaved}\r\n          currNote={currNote}\r\n          user={loggedUser}\r\n          onUpdateNote={onUpdateNote}\r\n          onRemoveNote={onRemoveNote}\r\n          onLogOut={onLogOut} />\r\n        {currNote && loggedUser.notes.length !== 0 ?\r\n          <textarea\r\n            name=\"body\"\r\n            value={currNote.body}\r\n            onChange={onNoteChange}\r\n            className=\"editor h100\"\r\n          ></textarea>\r\n\r\n          :\r\n          <h1>No notes left!</h1>\r\n        }\r\n\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\n\r\n\r\n","import { noteService } from '../../services/noteService'\r\n\r\n\r\n//ADD\r\nexport function addNote(user) {\r\n    return async dispatch => {\r\n        const updatedUser = await noteService.add(user)\r\n        dispatch({ type: 'SAVE_NOTE', updatedUser })\r\n    }\r\n}\r\n//UPDATE\r\nexport function updateNote(note, user) {\r\n    return async dispatch => {\r\n        const updatedUser = await noteService.update(note, user)\r\n        dispatch({ type: 'SAVE_NOTE', updatedUser })\r\n    }\r\n}\r\n//REMOVE\r\nexport function removeNote(noteId, user) {\r\n    return async dispatch => {\r\n        const updatedUser = await noteService.remove(noteId, user)\r\n        dispatch({ type: 'REMOVE_NOTE', updatedUser })\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport routes from './routes';\r\n\r\nfunction App() {\r\n  return (\r\n    <main className=\"app\">\r\n      <Router>\r\n        <Switch>\r\n          {routes.map(route => <Route key={route.path} exact component={route.component} path={route.path} />)}\r\n        </Switch>\r\n      </Router>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n\r\n\r\n\r\n\r\n","let localLoggedinUser = null;\r\nif (sessionStorage.user) localLoggedinUser = JSON.parse(sessionStorage.user);\r\n\r\nconst initialState = {\r\n    loggedUser: localLoggedinUser,\r\n}\r\n\r\nexport function userReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        //USER\r\n        case 'LOG_USER':\r\n            sessionStorage.setItem('user', JSON.stringify(action.user))\r\n            return {\r\n                ...state,\r\n                loggedUser: action.user\r\n            }\r\n        case 'LOGOUT':\r\n            return {\r\n                ...state,\r\n                loggedUser: null\r\n            }\r\n        //NOTE \r\n        case 'SAVE_NOTE':\r\n            sessionStorage.setItem('user', JSON.stringify(action.updatedUser))\r\n            return ({\r\n                ...state,\r\n                loggedUser: action.updatedUser\r\n            })\r\n\r\n        case 'REMOVE_NOTE':\r\n            sessionStorage.setItem('user', JSON.stringify(action.updatedUser))\r\n            return ({\r\n                ...state,\r\n                loggedUser: action.updatedUser,\r\n            })\r\n\r\n        default:\r\n            return state\r\n    }\r\n\r\n}","import { createStore, applyMiddleware, compose, combineReducers } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { userReducer } from './reducers/userReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    userReducer,\r\n})\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))\r\n\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App.jsx';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './store/store';\r\nimport './assets/style/main.scss';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}